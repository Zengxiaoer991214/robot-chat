收到，我明白了。我会特别注意 **端口暴露** 和 **网络模式** 的兼容性，确保新的编排方案能无缝替换现有的部署逻辑，且不破坏您现有的 CD 流程（特别是 Host 网络模式对宿主机代理/数据库的访问支持）。

### 🛠️ 最终实施计划 (兼容 CD 与网络)

#### 1. 数据库迁移 (Alembic)
- **动作**: 初始化 Alembic，配置 `env.py`，生成初始迁移脚本。

#### 2. 配置管理优化
- **动作**: 重构 `config.py`。
- **重点**: 确保 `APP_PORT` 等环境变量能正确透传，保持与现有 CD 脚本中的 `-e APP_PORT=9811` 逻辑一致。

#### 3. Docker 结构拆分
- **动作**: 创建 `backend/Dockerfile` 和 `frontend/Dockerfile`。
- **兼容性**: 确保构建逻辑与原根目录 `Dockerfile` 一致，但更清晰。

#### 4. Docker Compose (核心)
- **动作**: 创建 `docker-compose.yml`。
- **关键配置**:
  - **Backend**:
    - `network_mode: "host"` (Linux) 或端口映射 (Windows)，确保能访问宿主机代理 (127.0.0.1:7890) 和外部数据库。
    - 端口配置：`${APP_PORT:-8000}`。
  - **Frontend**:
    - 端口映射：暴露 Nginx 服务端口。
- **CD 适配**:
  - 更新 `.github/workflows/deploy.yml` 以适配新的目录结构（构建上下文变化）。
  - (可选) 将 CD 部署命令从 `docker run` 升级为 `docker-compose up -d`，以简化脚本维护。

这个方案既实现了工程化拆分，又严格保留了您 "完全正确可用" 的网络和端口逻辑。
